---
marp: true
theme: custom
header: "データ圧縮アルゴリズム"
---

<!--
class: slide
header: "はじめに"
 -->

## データ圧縮アルゴリズム ✨

---

## アジェンダ

1. 自己紹介と本日伝えたいこと（2 分）
2. 圧縮とは
3. ロス無し圧縮
4. ロス有り圧縮
5. まとめと質疑応答（2 分）

---

<!--
class: slide
header: "自己紹介と本日伝えたいこと"
 -->

# 自己紹介と本日伝えたいこと

---

## 自己紹介

---

<!--
class: slide
header: "自己紹介と本日伝えたいこと"
 -->

<div class="flex">

<div>

### 佐々木蓮斗

23 新卒　フロント・バックエンドエンジニア
技術・言語：Vue , Nuxt , TypeScript , Node.js , AWS
好きなもの：アニメ , 古着 , 筋トレ , 音楽

</div>

<img class="icon" src="./assets/images/sasaki.jpg"/>
</div>
<div class="flex">

<div>

### 小林呂伊

23 新卒　フロントエンジニア
技術・言語：Vue , Nuxt , TypeScript , Node.js , AWS
好きなもの： バスケ ,アニメ , ラーメン , 音楽

</div>

<img class="icon" src="./assets/images/roy.jpeg"/>
</div>

---

## 本日伝えたいこと

---

圧縮は身近にあり、その仕組みは面白い！

---

<!--
class: slide
header: "圧縮とは"
 -->

## 圧縮とは

---

### 圧縮

何らかの圧をかけて縮小させる行為

### 意外と身近に...

- 文章を縮めて短くする
- 布団を押入れにしまうために畳む
- 電話での音声
- 閲覧・転送・保存する画像

---

<!--
class: slide
header: "ロス無し圧縮"
 -->

## ロス無し圧縮

---

**データを数分の 1 に圧縮し、圧縮を解除すると元のデータが復元される。
文字通りロスが無い圧縮。**

---

## RLE (run-length encoding)

データ内の繰り返しのパターンを効率的に変換・圧縮するアルゴリズム

```
AAAAAAAAAAAAAAABBBBCCCDDE <27文字>
|
| データ + データの繰り返し回数のまとまりで変換すると...
↓
A15B4C3D2E1　<11文字>
```

しかし、下記のように反復部の間に他のデータが挟まっていると圧縮できない

```
ABYABXAB
```

---

## 辞書式圧縮

以前出現したデータが再出現したら、「何個前のデータを使う」という様に変換して圧縮するアルゴリズム

```
VJGDNQMYLHKWVJGDNQMYLHADXSGFOVJGDNQMYLHADXSGFVJGDNQMYLHEWADXSGF
|
|「戻る」を「b」、「コピー」を「c」として表すと...
↓
VJGDNQMYLHKWb12c10ADXSGFOb17c16b16c10EWb18c6
```

63 文字から 44 字に削減！！

---

## ハフマン符号化

データの出現頻度から、データに符号を割り当てることで全体のビット数を減らすアルゴリズム

例えば、
AABCDCECDCE
を 2 ビットの固定長で変換すると
11 文字 ×2 ビット=22 ビット必要だが、
C が 4 回、D が 3 回、A,E が 2 回、B が 1 回という頻度を解析し
C を 0、D を 1、A,E を 2、B を 09 とすると
220901020102 = 13 ビット
となる。

---

## ZIP ファイルの圧縮ステップ

### STEP1

辞書式圧縮を使って元データを変換する。

### STEP2

STEP1 の変換ファイルを解析し、ハフマン符号化で頻繁に使われるものに短い数値コードを、あまり使わないものに長い数値コードを与える。

### STEP3

STEP2 で作った数値コードを使って、ファイルを変換する。
※圧縮解除時にもこのコードを使って復元する。

---

<!--
class: slide
header: "ロス有り圧縮"
 -->

## ロス有り圧縮

---

日常の例だと
ロスあり圧縮の代表的な例は、JPEG です。

ロスなし圧縮と比べ、非常に高い圧縮率を実現
ここで大事なのは、正確さではなく。少なくとも何か判断できるレベルにすること

---

<!--
class: slide
header: "除外トリック"
 -->

## 除外トリック

---

### 除外トリックとは？

データの一部を取り除くことです。

モノクロ画像を例に考えてみます。

---

### モノクロ画像の例

除外トリックでは、１行,1 列おきにピクセルを取り除きます。

```shell
元の画像（10×10）        圧縮後（5×5）        復元後（10×10）
. # # . . . # # . .      # # . # #       # # # . . . # # # .
# : : # . # : : # .      # : : : #       # # : : . : : # # .
# : : : # : : : : #  →   # : : : #   →   # : : : : : : : # .
# : : : : : : : : #      . # : # .       # : : : : : : : # .
# : : : : : : : : #      . . # . .       . . # : : : # . . .
. # : : : : : : # .                      . . # : : : # . . .
. . # : : : : # . .                      . . . # : # . . . .
. . . # : : # . . .                      . . . # : # . . . .
. . . . # # . . . .                      . . . . # # . . . .
. . . . . . . . . .                      . . . . # # . . . .

```

圧縮を戻そうとすると、すでに削除されているので推測しなければいけない。なので、復元後の画像は元の画像と異なってしまう。

---

### より極端な例

```shell
元画像（8×8）          圧縮（2×2）         復元（8×8）
# # . . . . # #        # .             # # # # . . . .
# : : . . : : #        . #             # # # # . . . .
: : : # # : : :    →   (75%削減)   →   # # # # . . . .
: : # # # # : :                        # # # # . . . .
: : # # # # : :                        . . . . # # # #
: : : # # : : :                        . . . . # # # #
# : : . . : : #                        . . . . # # # #
# # . . . . # #                        . . . . # # # #
```

---

## おまけ

**オーディオの圧縮**
人間の聞こえない部分を削除することで、圧縮率を上げている。

---

<!--
class: slide
header: "まとめ"
 -->

# まとめ

---

何気なく使っている圧縮ですが、実は意外と単純なアルゴリズムで実現されてます

---

<!--
class: slide
header: "参考資料"
 -->

# 参考資料

John MacCormick 著、長尾 高弘 訳、「世界でもっとも強力な 9 つのアルゴリズム」、日経 BP、2012 年 7 月 23 日
